# 测试用例

## 1. /bigdata-admin/api/v1/authorize/initProductPermissions
```shell 
// =================================================================================================================
// Test Case 1:  dlink 初始化产品线 product_1 添加新用户 user_1-product_1 并授权 平台管理员 
// =====================================================================================================================
// dlink Token:  eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJkbGluayJ9fSwiaWF0IjowfQ==
{
    "productName": "product_1",
    "username": "user_1-product_1",
    "branch": "master",
    "repository": "https://gitlab.bj.sensetime.com/plat-bigdata/sensecloud-analysis"
}
// =====================================================================================================================
// Expectation： 403 授权失败 
// =====================================================================================================================


// =================================================================================================================
// Test Case 2:  sre.bigdata 初始化产品线 product_1 添加新用户 user_1-product_1 并授权 平台管理员 
// =====================================================================================================================
// sre.bigdata Token: eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJzcmUuYmlnZGF0YSJ9fSwiaWF0IjowfQ==
{
    "productName": "product_1",
    "username": "user_1-product_1",
    "branch": "master",
    "repository": "https://gitlab.bj.sensetime.com/plat-bigdata/sensecloud-analysis"
}
// =====================================================================================================================
// Expectation： 200 成功
// =====================================================================================================================


// =================================================================================================================
// Test Case 3:  sre.bigdata 初始化产品线 product_2 添加新用户 user_1-product_2 并授权 平台管理员 
// =====================================================================================================================
// sre.bigdata Token: eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJzcmUuYmlnZGF0YSJ9fSwiaWF0IjowfQ==
{
    "productName": "product_2",
    "username": "user_1-product_2",
    "branch": "master",
    "repository": "https://gitlab.bj.sensetime.com/plat-bigdata/sensecloud-analysis"
}
// =====================================================================================================================
// Expectation： 200 成功
// =====================================================================================================================
```

## 2. /bigdata-admin​/api​/v1​/authorize​/bindUserRoleToProduct
```shell
// =================================================================================================================
// Test Case 1:  dlink 向产品线 dlink 添加新用户 dlink-test-1 并授权 平台管理员 
// =====================================================================================================================
// dlink Token:  eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJkbGluayJ9fSwiaWF0IjowfQ==
// username:     dlink-test-1
// rolename:     PlatformAdmin
// productName:  dlink 
// =====================================================================================================================
// Expectation： 403 授权失败 
// =====================================================================================================================


// =================================================================================================================
// Test Case 2:  dlink 向产品线 dlink 添加新用户 dlink-test-2 并授权 产品线管理员 
// =====================================================================================================================
// dlink Token:  eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJkbGluayJ9fSwiaWF0IjowfQ==
// username:     dlink-test-2
// rolename:     ProductAdmin
// productName:  dlink 
// =====================================================================================================================
// 期望结果：     200 成功 
// =====================================================================================================================


// =================================================================================================================
// Test Case 3:  dlink 向产品线 dlink 添加新用户 dlink-test-3 并授权 数据分析师 
// =====================================================================================================================
// dlink Token:  eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJkbGluayJ9fSwiaWF0IjowfQ==
// username:     dlink-test-3
// rolename:     DataAnalyst
// productName:  dlink 
// =====================================================================================================================
// 期望结果：     200 成功 
// =====================================================================================================================


// =================================================================================================================
// Test Case 4: sre.bigdata 向产品线 dlink 添加新用户 dlink-test-4 并授权 平台管理员 
// =====================================================================================================================
// sre.bigdata Token: eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJzcmUuYmlnZGF0YSJ9fSwiaWF0IjowfQ==
// username:          dlink-test-4
// rolename:          PlatformAdmin
// productName:       dlink
// =====================================================================================================================
// 期望结果：          200 成功 
// =====================================================================================================================
```

## 3. /bigdata-admin​/api​/v1​/authorize​/unbindUserRoleFromProduct
```shell
// =================================================================================================================
// Test Case 1:  dlink 解绑用户 dlink-test-3 在产品线 dlink 的 数据分析师 角色
// =====================================================================================================================
// dlink Token:  eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJkbGluayJ9fSwiaWF0IjowfQ==
// username:     dlink-test-3
// rolename:     DataAnalyst
// productName:  dlink 
// =====================================================================================================================
// 期望结果：     200 成功
// =====================================================================================================================


// =================================================================================================================
// Test Case 2:  dlink 解绑用户 dlink-test-4 在产品线 dlink 的 平台管理员 角色
// =====================================================================================================================
// dlink Token:  eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJkbGluayJ9fSwiaWF0IjowfQ==
// username:     dlink-test-4
// rolename:     PlatformAdmin
// productName:  dlink 
// =====================================================================================================================
// 期望结果：     403 授权失败
// =====================================================================================================================


// =================================================================================================================
// Test Case 3:  sre.bigdata 解绑用户 dlink-test-4 在产品线 dlink 的 平台管理员 角色
// =====================================================================================================================
// sre.bigdata Token:  eyJleHQiOnsiaWRlbnRpdHkiOnsidXNlcm5hbWUiOiJzcmUuYmlnZGF0YSJ9fSwiaWF0IjowfQ==
// username:           dlink-test-4
// rolename:           PlatformAdmin
// productName:        dlink 
// =====================================================================================================================
// 期望结果：     200 成功
// =====================================================================================================================
```
